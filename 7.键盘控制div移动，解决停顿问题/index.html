<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>键盘控制div移动，解决停顿问题</title>
<style>
body{ padding:0; margin:0;}
#div1{background:#F00; height:200px; width:200px; position:absolute}
</style>
<script>
window.onload=function(){
	var oDiv=document.getElementById("div1");
	key={l:false,t:false,r:false,b:false};
	
	setInterval(function(){
			if(key.l)
			{
				oDiv.style.left=oDiv.offsetLeft-10+"px";
			}
			if(key.t)
			{
				oDiv.style.top=oDiv.offsetTop-10+"px";
			}
			if(key.r)
			{
				oDiv.style.left=oDiv.offsetLeft+10+"px";
			}
			if(key.b)
			{
				oDiv.style.top=oDiv.offsetTop+10+"px";
			}
		}
	,30)
	
	document.onkeydown=function(ev)
	{
		var ev=ev||event;
		switch(ev.keyCode)
		{
			case 37:
			   key.l=true;
			break;
			case 38:
			   key.t=true;
			break;
			case 39:
			   key.r=true;
			break;
			case 40:
			   key.b=true;
			break;
		}
	}
	
	document.onkeyup=function(ev)
	{
		var ev=ev||event;
		switch(ev.keyCode)
		{
			case 37:
			   key.l=false;
			break;
			case 38:
			   key.t=false;
			break;
			case 39:
			   key.r=false;
			break;
			case 40:
			   key.b=false;
			break;
		}
	}
}
</script>
</head>
<body>
<div id="div1"></div>
</body>
</html>
